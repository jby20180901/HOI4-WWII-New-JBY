on_actions = {
	on_startup = {
		effect = {
			PRC = {
				set_variable = { 		###升级时间
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				set_variable = { 		###升级次数
					var = taizu_var_jiandie_upgrade1_frequency
					value = 4
				}
				set_variable = { 		###升级次数
					var = taizu_var_jiandie_upgrade2_frequency
					value = 3
				}
				set_variable = { 		###升级次数
					var = taizu_var_jiandie_upgrade3_frequency
					value = 2
				}
				set_variable = { 		###升级次数
					var = taizu_var_jiandie_upgrade4_frequency
					value = 2
				}
				set_variable = { 		###升级次数
					var = taizu_var_jiandie_upgrade5_frequency
					value = 4
				}
				set_variable = { 		###升级次数
					var = taizu_var_jiandie_upgrade6_frequency
					value = 2
				}
				
				set_variable = { 
					var = taizu_var
					value = 100
				}
				set_variable = { 
					var = taizu_var_change
					value = 0.1
				}
				set_variable = { 
					var = taizu_var_cost
					value = 0
				}
				set_variable = { 
					var = taizu_var_cost1
					value = 0.4
				}
				set_variable = { 
					var = taizu_var_cost2
					value = 0.2
				}
				set_variable = { 
					var = taizu_var_cost3
					value = 0.2
				}
				set_variable = { 
					var = taizu_var_cost4
					value = 0.5
				}
				set_variable = { 
					var = taizu_var_cost5
					value = 0.4
				}
				set_variable = { 
					var = taizu_var_cost6
					value = 0.4
				}
				set_variable = { 
					var = taizu_var_cost7
					value = 0.6
				}
				set_variable = { 
					var = taizu_var_jiandie_upgrade_cost1
					value = 15
				}
				set_variable = { 
					var = taizu_var_jiandie_upgrade_cost2
					value = 17
				}
				set_variable = { 
					var = taizu_var_jiandie_upgrade_cost3
					value = 25
				}
				set_variable = { 
					var = taizu_var_jiandie_upgrade_cost4
					value = 23
				}
				set_variable = { 
					var = taizu_var_jiandie_upgrade_cost5
					value = 15
				}
				set_variable = { 
					var = taizu_var_jiandie_upgrade_cost6
					value = 20
				}
				
				set_variable = { show_taizu_menu = 0 }
				
				set_variable = { show_taizu_menu1 = 0 }
				
				set_variable = { show_taizu_menu2 = 0 }
				
				set_variable = { show_taizu_menu3 = 0 }
				
				set_variable = { show_taizu_menu4 = 0 }
				
				set_variable = { show_taizu_menu5 = 0 }
				
				set_variable = { show_taizu_menu6 = 0 }
				
				set_variable = { show_taizu_menu7 = 0 }
				
				set_country_flag = taizu_var_jiandie_upgrade_end  ###升级是否关闭
				
				
				
			}
		
		}
		
	}
	on_daily = { 
		effect = {
		
			add_to_variable = { 
				var = taizu_var
				value = taizu_var_change
			}
			subtract_from_variable = {
				var = taizu_var
				value = taizu_var_cost
			}
			#检查
			if = {
				limit = {
					check_variable = { taizu_var < 0 }
				}
				#检查buff1
				if = {
					limit = {
						check_variable = { show_taizu_menu1 = 1 }
					}
					taizu_buff1_end = yes
				}
				#检查buff2
				if = {
					limit = {
						check_variable = { show_taizu_menu2 = 1 }
					}
					taizu_buff2_end = yes
				}
				#检查buff3
				if = {
					limit = {
						check_variable = { show_taizu_menu3 = 1 }
					}
					taizu_buff3_end = yes
				}
				#检查buff4
				if = {
					limit = {
						check_variable = { show_taizu_menu4 = 1 }
					}
					taizu_buff4_end = yes
				}
				#检查buff5
				if = {
					limit = {
						check_variable = { show_taizu_menu5 = 1 }
					}
					taizu_buff5_end = yes
				}
				#检查buff6
				if = {
					limit = {
						check_variable = { show_taizu_menu6 = 1 }
					}
					taizu_buff6_end = yes
				}
				#检查buff7
				if = {
					limit = {
						check_variable = { show_taizu_menu7 = 1 }
					}
					taizu_buff7_end = yes
				}
				
				
			}
			
			#间谍系统倒计时
			if = {
				limit = { 
					PRC = { NOT = { has_country_flag = taizu_var_jiandie_upgrade_end } }
				}
				subtract_from_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 1
				}
			}
			#间谍系统升级完成
			if = {
				limit = { 
					PRC = { 
						NOT = { has_country_flag = taizu_var_jiandie_upgrade_end }
						has_country_flag = upgrade1_pro_hajimaru
					}
					check_variable = { taizu_var_jiandie_upgrade_time = 0 }		##当倒计时等于0时
				}
				set_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				PRC = {
					set_country_flag = taizu_var_jiandie_upgrade_end
					upgrade_intelligence_agency = prc_upgrade_economy_civilian
					country_event = { id = eastasia.20000 }
					clr_country_flag = upgrade1_pro_hajimaru
				}
			}
			if = {
				limit = { 
					PRC = { 
						NOT = { has_country_flag = taizu_var_jiandie_upgrade_end }
						has_country_flag = upgrade2_pro_hajimaru
					}
					check_variable = { taizu_var_jiandie_upgrade_time = 0 }		##当倒计时等于0时
				}
				set_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				PRC = {
					set_country_flag = taizu_var_jiandie_upgrade_end
					upgrade_intelligence_agency = prc_upgrade_army_department
					country_event = { id = eastasia.20000 }
					clr_country_flag = upgrade2_pro_hajimaru
				}
			}
			if = {
				limit = { 
					PRC = { 
						NOT = { has_country_flag = taizu_var_jiandie_upgrade_end }
						has_country_flag = upgrade3_pro_hajimaru
					}
					check_variable = { taizu_var_jiandie_upgrade_time = 0 }		##当倒计时等于0时
				}
				set_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				PRC = {
					set_country_flag = taizu_var_jiandie_upgrade_end
					upgrade_intelligence_agency = prc_upgrade_naval_department
					country_event = { id = eastasia.20000 }
					clr_country_flag = upgrade3_pro_hajimaru
				}
			}
			if = {
				limit = { 
					PRC = { 
						NOT = { has_country_flag = taizu_var_jiandie_upgrade_end }
						has_country_flag = upgrade4_pro_hajimaru
					}
					check_variable = { taizu_var_jiandie_upgrade_time = 0 }		##当倒计时等于0时
				}
				set_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				PRC = {
					set_country_flag = taizu_var_jiandie_upgrade_end
					upgrade_intelligence_agency = prc_upgrade_airforce_department
					country_event = { id = eastasia.20000 }
					clr_country_flag = upgrade4_pro_hajimaru
				}
			}
			if = {
				limit = { 
					PRC = { 
						NOT = { has_country_flag = taizu_var_jiandie_upgrade_end }
						has_country_flag = upgrade5_pro_hajimaru
					}
					check_variable = { taizu_var_jiandie_upgrade_time = 0 }		##当倒计时等于0时
				}
				set_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				PRC = {
					set_country_flag = taizu_var_jiandie_upgrade_end
					upgrade_intelligence_agency = prc_upgrade_passive_defense
					country_event = { id = eastasia.20000 }
					clr_country_flag = upgrade5_pro_hajimaru
				}
			}
			if = {
				limit = { 
					PRC = { 
						NOT = { has_country_flag = taizu_var_jiandie_upgrade_end }
						has_country_flag = upgrade6_pro_hajimaru
					}
					check_variable = { taizu_var_jiandie_upgrade_time = 0 }		##当倒计时等于0时
				}
				set_variable = {
					var = taizu_var_jiandie_upgrade_time
					value = 30
				}
				PRC = {
					set_country_flag = taizu_var_jiandie_upgrade_end
					upgrade_intelligence_agency = prc_upgrade_anti_partisan
					country_event = { id = eastasia.20000 }
					clr_country_flag = upgrade6_pro_hajimaru
				}
			}
			
			#中共坚持时间
			if = {
				limit = {
					has_variable = zhonggong_jianchishijian
				}
				add_to_variable = {
					var = zhonggong_jianchishijian
					value = 1
				}
			}
			#坚持时间到
			if = {
				limit = {
					check_variable = { zhonggong_jianchishijian = 100 }
					SHX = { 
						has_war_with = PRC
						exists = yes
						NOT = { is_puppet_of = PRC  is_puppet_of = CHI }
					}
					PRC = {
						exists = yes
						has_full_control_of_state = 798
						is_puppet = no
						NOT = { is_in_faction_with = SHX }
					}
				}
				clear_variable = zhonggong_jianchishijian
				SHX = { country_event = { id = dbj.19 } }
			}
			if = {
				limit = {
					check_variable = { zhonggong_jianchishijian = 100 }
					SHX = { has_war_with = PRC }
					XNM = { has_war_with = PRC }
					PRC = {
						exists = yes
						is_puppet = no
						NOT = { is_in_faction_with = CHI }
					}
				}
				clear_variable = zhonggong_jianchishijian
				SHX = { white_peace = PRC }
				XNM = { white_peace = PRC }
				PRC = { country_event = { id = dbj.26 } }
			}
		}
	}
}