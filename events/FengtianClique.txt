add_namespace = FengtianClique

# Northeast army attack the CPC
country_event = {
	id = FengtianClique.1
	title = FengtianClique.1.t
	picture = GFX_report_event_chinese_officers
	desc = FengtianClique.1.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.1.a
					add_opinion_modifier = {
							target = FROM
							modifier = Nations_friendly
						}
		}
}

# Non aggression pact with northeast army
country_event = {
	id = FengtianClique.2
	title = FengtianClique.2.t
	picture = GFX_report_event_chinese_officers
	desc = FengtianClique.2.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.2.a
					add_opinion_modifier = {
							target = FROM
							modifier = Nations_friendly
						}
					diplomatic_relation = { country = DBJ relation = non_aggression_pact }
					FROM = { set_country_flag = FTC_NEA_non_aggression_pact_with_CPC }
		}
}

# NEA want take the suiyuan
country_event = {
	id = FengtianClique.3
	title = FengtianClique.3.t
	picture = GFX_report_event_chinese_officers
	desc = FengtianClique.3.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { 
					factor = 90
						modifier = {
							factor = 30
							OR = {
									any_other_country = {
											is_puppet_of = JAP
											is_neighbor_of = SHX
										}
									JAP = {
											is_neighbor_of = SHX
										}
								}
							SHX = {
									NOT = { is_puppet_of = JAP }
								}
						}
						modifier = {
							factor = 50
							PRC = {
									exists = no
								}
							NOT = {
									any_other_country = {
											is_puppet_of = JAP
											is_neighbor_of = SHX
										}
									JAP = {
											is_neighbor_of = SHX
										}
								}
						}
					}
				name = FengtianClique.3.a
					FROM = { country_event = { id = FengtianClique.4 days = 1 } }
		}
		option = {
				ai_chance = { 
					factor = 10
						modifier = {
							factor = 70
							OR = {
									any_other_country = {
											is_puppet_of = JAP
											is_neighbor_of = SHX
										}
									JAP = {
											is_neighbor_of = SHX
										}
								}
							SHX = {
									NOT = { is_puppet_of = JAP }
								}
						}
						modifier = {
							factor = 50
							PRC = {
									exists = no
								}
							NOT = {
									any_other_country = {
											is_puppet_of = JAP
											is_neighbor_of = SHX
										}
									JAP = {
											is_neighbor_of = SHX
										}
								}
						}
					}
				name = FengtianClique.3.b
					FROM = {
							country_event = { id = FengtianClique.5 days = 1 }
							transfer_state = 621
						}
					621 = { add_core_of = FROM }
		}
}

# A country say no
country_event = {
	id = FengtianClique.4
	title = FengtianClique.4.t
	picture = GFX_report_event_chinese_soldiers_02
	desc = FengtianClique.4.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.4.a
		}
}
# A country say yes
country_event = {
	id = FengtianClique.5
	title = FengtianClique.5.t
	picture = GFX_report_event_chinese_japanese_handshake
	desc = FengtianClique.5.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.5.a
		}
}

# Xi'an-shaanxi trading
country_event = {
	id = FengtianClique.6
	title = FengtianClique.6.t
	picture = GFX_report_event_generic_truck
	desc = FengtianClique.6.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.6.a
					random_owned_controlled_state = {
							add_extra_state_shared_building_slots = 1
							add_building_construction = {
									type = industrial_complex
									level = 1
									instant_build = yes
								}
						}
		}
}

# Meeting with Chiang Kai-shek
country_event = {
	id = FengtianClique.7
	title = FengtianClique.7.t
	picture = GFX_report_event_chinese_officers
	desc = FengtianClique.7.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { 
					factor = 95
						modifier = {
							factor = 30
							PRC = {
									exists = no
								}
						}
					}
				name = FengtianClique.7.a
					FROM = { country_event = { id = FengtianClique.8 days = 1 } }
		}
		option = {
				ai_chance = { 
					factor = 5
						modifier = {
							factor = 70
							PRC = {
									exists = no
								}
						}
					}
				name = FengtianClique.7.b
					every_other_country = {
							limit = {
									OR = {
											tag = SHX
											tag = GXC
											tag = YUN
											tag = XSM
											tag = YXC
											tag = SLJ
											tag = XBJ
											tag = XXC
											tag = PRC
											tag = DBJ
										}
									exists = yes
									is_subject = no
								}
							diplomatic_relation = { country = CHI relation = non_aggression_pact }
						}
					FROM = { country_event = { id = FengtianClique.5 days = 1 } }
					set_global_flag = xian_incident_has_not_happened
		}
}

# CHI reject
country_event = {
	id = FengtianClique.8
	title = FengtianClique.8.t
	picture = GFX_report_event_chinese_soldiers_02
	desc = FengtianClique.8.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 10 }
				name = FengtianClique.8.a
		}
		option = {
				ai_chance = { factor = 90 }
				name = FengtianClique.8.b
				FROM = { country_event = { id = FengtianClique.9 days = 1 } }
		}
}
country_event = {
	id = FengtianClique.9
	title = FengtianClique.9.t
	picture = GFX_report_event_chinese_soldiers_02
	desc = FengtianClique.9.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 90 }
				name = FengtianClique.9.a
				FROM = { country_event = { id = FengtianClique.10 days = 1 } }
				add_opinion_modifier = {
					target = FROM
					modifier = Nations_estrangement
				}
		}
		option = {
				ai_chance = { factor = 10 }
				name = FengtianClique.9.b
					every_other_country = {
							limit = {
									OR = {
											tag = SHX
											tag = GXC
											tag = YUN
											tag = XSM
											tag = YXC
											tag = SLJ
											tag = XBJ
											tag = XXC
											tag = PRC
											tag = DBJ
										}
									exists = yes
									is_subject = no
								}
							diplomatic_relation = { country = CHI relation = non_aggression_pact }
						}
				FROM = { country_event = { id = FengtianClique.5 days = 1 } }
				set_global_flag = xian_incident_has_not_happened
		}
}

# CHI reject 2
country_event = {
	id = FengtianClique.10
	title = FengtianClique.10.t
	picture = GFX_report_event_chinese_soldiers_02
	desc = FengtianClique.10.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 90 }
				name = FengtianClique.10.a
				add_opinion_modifier = {
					target = FROM
					modifier = Nations_estrangement
				}
		}
		option = {
				ai_chance = { factor = 10 }
				name = FengtianClique.10.b
				every_state = {
						limit = {
								is_controlled_by = DBJ
							}
						remove_core_of = DBJ
						CHI = { transfer_state = PREV }
					}
				transfer_state = 595
				transfer_state = 596
				595 = {
						add_core_of = DBJ
					}
				596 = {
						add_core_of = DBJ
					}
				add_opinion_modifier = {
					target = FROM
					modifier = Nations_estrangement
				}
				CHI = { puppet = DBJ }
				FROM = { country_event = { id = FengtianClique.5 days = 1 } }
				set_global_flag = xian_incident_has_not_happened
				set_global_flag = CHI_no_national_front_flag
				custom_effect_tooltip = CHI_no_united_front
		}
}

# Chiang Kai-shek inspection us
country_event = {
	id = FengtianClique.11
	title = FengtianClique.11.t
	desc = FengtianClique.11.d
	picture = GFX_report_event_china_politicians_captured
	
	trigger = {
		date > 1936.9.1
		tag = DBJ
		NOT = {
			has_global_flag = zhang_join_northwestunion
			has_global_flag = xian_incident_has_not_happened
			has_war_with = CHI
		}
	}

	fire_only_once = yes

	option = {
		name = FengtianClique.11.a
	}
}

# Great northwest union
country_event = {
	id = FengtianClique.12
	title = FengtianClique.12.t
	picture = GFX_report_event_generic_read_write
	desc = FengtianClique.12.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 50 }
				name = FengtianClique.12.a
				FROM = { country_event = { id = EFM_independent.3 days = 1 } }
				CHI = { country_event = { id = FengtianClique.14 days = 5 } }
		}
		option = {
				ai_chance = { factor = 25 }
				name = FengtianClique.12.b
				FROM = { country_event = { id = FengtianClique.13 days = 1 } }
		}
		option = {
				ai_chance = { factor = 25 }
				name = FengtianClique.12.c
				FROM = { country_event = { id = FengtianClique.4 days = 1 } }
		}
}
# CPC agree
country_event = {
	id = FengtianClique.13
	title = FengtianClique.13.t
	picture = GFX_report_event_chinese_japanese_handshake
	desc = FengtianClique.13.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.13.a
				puppet = PRC
				CHI = { country_event = { id = FengtianClique.14 days = 5 } }
				hidden_effect = {
					PRC = { 
							add_popularity = {
									ideology = communism
									popularity = 0.7
								}
							set_politics = {
									ruling_party = communism
									elections_allowed = no
								}
						}
				}
		}
}
# CHI reaction
country_event = {
	id = FengtianClique.14
	title = FengtianClique.14.t
	picture = GFX_report_event_chinese_officers
	desc = FengtianClique.14.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 70 }
				name = FengtianClique.14.a
				declare_war_on = {
						target = DBJ
						type = annex_everything
					}
				FROM = { country_event = { id = FengtianClique.4 days = 1 } }
				set_global_flag = CHI_no_national_front_flag
				custom_effect_tooltip = CHI_no_united_front
		}
		option = {
				ai_chance = { factor = 30 }
				name = FengtianClique.14.b
					every_other_country = {
							limit = {
									OR = {
											tag = SHX
											tag = GXC
											tag = YUN
											tag = XSM
											tag = YXC
											tag = SLJ
											tag = XBJ
											tag = XXC
											tag = PRC
											tag = DBJ
										}
									exists = yes
									is_subject = no
								}
							diplomatic_relation = { country = CHI relation = non_aggression_pact }
						}
				FROM = { country_event = { id = FengtianClique.5 days = 1 } }
				SHX = { country_event = { id = FengtianClique.15 days = 1 } }
		}
}
# CHI agree ,SHX's reaction
country_event = {
	id = FengtianClique.15
	title = FengtianClique.15.t
	picture = GFX_report_event_chinese_officers
	desc = FengtianClique.15.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 50 }
				name = FengtianClique.15.a
				DBJ = { country_event = { id = FengtianClique.16 days = 1 } }
		}
		option = {
				ai_chance = { factor = 50 }
				name = FengtianClique.15.b
		}
}
country_event = {
	id = FengtianClique.16
	title = FengtianClique.16.t
	picture = GFX_report_event_chinese_japanese_handshake
	desc = FengtianClique.16.d
	
	is_triggered_only = yes

		option = {
				name = FengtianClique.15.a
				puppet = FROM
		}
}

# DBJ seeking soviet aid they
country_event = {
	id = FengtianClique.17
	title = FengtianClique.17.t
	picture = GFX_report_event_generic_truck
	desc = FengtianClique.17.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 50 }
				name = FengtianClique.17.a
				FROM = { country_event = { id = FengtianClique.5 days = 1 } }
				set_country_flag = FTC_soviet_aid_the_GNWG
		}
		option = {
				ai_chance = { factor = 50 }
				name = FengtianClique.17.b
				FROM = { country_event = { id = FengtianClique.4 days = 1 } }
		}
}
country_event = {
	id = FengtianClique.18
	title = FengtianClique.18.t
	desc = FengtianClique.18.d
	picture = GFX_report_event_generic_lend_lease
	
	mean_time_to_happen = {
		days = 150
	}
	
	trigger = {
		tag = DBJ
		SOV = { has_country_flag = FTC_soviet_aid_the_GNWG }
	}

	option = {
		name = FengtianClique.18.a
			add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1000 producer = SOV }
			add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 100 producer = SOV }
	}
}

# DBJ Declaration of independence
country_event = {
	id = FengtianClique.19
	title = FengtianClique.19.t
	picture = GFX_report_event_generic_rally2
	desc = FengtianClique.19.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 10 }
				name = FengtianClique.19.a
				add_opinion_modifier = {
						target = FROM
						modifier = Nations_friendly
					}
				FROM = { country_event = { id = FengtianClique.21 days = 1 } }
		}
		option = {
				ai_chance = { factor = 90 }
				name = FengtianClique.19.b
                create_wargoal = {
                        type = annex_everything
                        target = FROM
                    }
				add_opinion_modifier = {
						target = FROM
						modifier = hostile_status
					}
				FROM = { country_event = { id = FengtianClique.20 days = 1 } }
		}
}
# CHI mobilize the army
country_event = {
	id = FengtianClique.20
	title = FengtianClique.20.t
	desc = FengtianClique.20.d
	picture = GFX_report_event_chinese_soldiers_running
	
	is_triggered_only = yes

	option = {
		name = FengtianClique.20.a
				FROM = {
						add_opinion_modifier = {
								target = ROOT
								modifier = hostile_status
							}
					}
	}
}
# CHI recognize us
country_event = {
	id = FengtianClique.21
	title = FengtianClique.21.t
	desc = FengtianClique.21.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = FengtianClique.21.a
				add_opinion_modifier = {
						target = FROM
						modifier = Nations_friendly
					}
	}
}

# DBJ cooperation with nanking
country_event = {
	id = FengtianClique.22
	title = FengtianClique.22.t
	picture = GFX_
	desc = FengtianClique.22.d
	
	is_triggered_only = yes

		option = {
				ai_chance = { factor = 45 }
				name = FengtianClique.22.a
				FROM = {
						create_faction = "FTC_fengtian_nanking_agreement" 
						add_to_faction = CHI
						country_event = { id = FengtianClique.5 days = 1 }
					}
		}
		option = {
				ai_chance = { factor = 45 }
				name = FengtianClique.22.b
				give_guarantee = FROM
				FROM = { country_event = { id = FengtianClique.23 days = 1 } }
		}
		option = {
				ai_chance = { factor = 10 }
				name = FengtianClique.22.c
				FROM = { country_event = { id = FengtianClique.4 days = 1 } }
		}
}
# CHI limited cooperation
country_event = {
	id = FengtianClique.23
	title = FengtianClique.23.t
	desc = FengtianClique.23.d
	picture = GFX_report_event_chinese_japanese_handshake
	
	is_triggered_only = yes

	option = {
		name = FengtianClique.23.a
				give_guarantee = FROM
	}
}

# DBJ support with nanking
country_event = {
	id = FengtianClique.24
	title = FengtianClique.24.t
	desc = FengtianClique.24.d
	picture = GFX_report_event_chinese_japanese_handshake
	
	is_triggered_only = yes

	option = {
		name = FengtianClique.24.a
				ROOT = { set_autonomy = { target = FROM autonomy_state = autonomy_integrated_puppet } }
	}
}

# DBJ ask for surrender
country_event = {
	id = FengtianClique.25
	title = FengtianClique.25.t
	picture = GFX_
	desc = FengtianClique.25.d
	
	is_triggered_only = yes

		option = {
				ai_chance = {
					factor = 30
					modifier = {
						factor = 70
						strength_ratio = {
							tag = FROM
							ratio < 0.75
						}
					}
				}
				name = FengtianClique.25.a
				FROM = {
						country_event = { id = FengtianClique.5 days = 1 }
						annex_country = { target = ROOT transfer_troops = yes }
					}
		}
		option = {
				ai_chance = {
					factor = 70
					modifier = {
						factor = 90
						strength_ratio = {
							tag = FROM
							ratio > 0.75
						}
					}
				}
				name = FengtianClique.25.b
				FROM = { country_event = { id = FengtianClique.26 days = 1 } }
		}
}
country_event = {
	id = FengtianClique.26
	title = FengtianClique.26.t
	desc = FengtianClique.26.d
	picture = GFX_
	
	is_triggered_only = yes

	option = {
		name = FengtianClique.26.a
				create_wargoal = { type = annex_everything target = FROM }
	}
}

# DBJ ask for submission
country_event = {
	id = FengtianClique.27
	title = FengtianClique.27.t
	picture = GFX_
	desc = FengtianClique.27.d
	
	is_triggered_only = yes

		option = {
				ai_chance = {
					factor = 30
					modifier = {
						factor = 70
						strength_ratio = {
							tag = FROM
							ratio < 0.75
						}
					}
				}
				name = FengtianClique.27.a
				FROM = {
						country_event = { id = FengtianClique.5 days = 1 }
						set_autonomy = { target = ROOT autonomy_state = autonomy_integrated_puppet }
					}
		}
		option = {
				ai_chance = {
					factor = 70
					modifier = {
						factor = 90
						strength_ratio = {
							tag = FROM
							ratio > 0.75
						}
					}
				}
				name = FengtianClique.27.b
				FROM = { country_event = { id = FengtianClique.26 days = 1 } }
		}
}