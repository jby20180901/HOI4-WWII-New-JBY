add_namespace = EFM_Mongolia

# Change the leader (1936)
country_event = {
	id = EFM_Mongolia.1
	title = EFM_Mongolia.1.t
	desc = EFM_Mongolia.1.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes
	
	trigger = {
		tag = MON
		date > 1936.4.1
		is_subject_of = SOV
	}
	
	option = {
		ai_chance = { factor = 1 }
		name = EFM_Mongolia.1.a
			
		}
	option = {
		ai_chance = { factor = 99 }
		name = EFM_Mongolia.1.b
			retire_country_leader = yes
			create_country_leader = {
				name = "阿南迪恩·阿马尔"
				desc = "POLITICS_ANANDYN_AMAR_DESC"
				picture = "gfx/leaders/MON/Portrait_Peljidiin_Genden.dds"
				expire = "1965.1.1"
				ideology = leninism
				traits = {
					#
				}
			}
		}
}
# Change the leader
country_event = {
	id = EFM_Mongolia.2
	title = EFM_Mongolia.2.t
	desc = EFM_Mongolia.2.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes
	
	trigger = {
		tag = MON
		date > 1938.1.1
		has_global_flag = great_repression_mon
		is_subject_of = SOV
		NOT = {
				has_country_flag = MON_Ban_the_amar
				has_country_flag = MON_Ban_the_choibalsan
			}
	}
	
	option = {
		ai_chance = { factor = 1 }
		name = EFM_Mongolia.2.a
			set_country_flag = MON_Ban_the_amar
		}
	option = {
		ai_chance = { factor = 99 }
		name = EFM_Mongolia.2.b
			retire_country_leader = yes
			create_country_leader = {
				name = "霍尔洛·乔巴山"
				desc = "POLITICS_KHORLOOGIIN_CHOIBALSAN_DESC"
				picture = "Portrait_Khorloogiin_Choibalsan.dds"
				expire = "1965.1.1"
				ideology = stalinism
				traits = {
					#
				}
			}
			set_country_flag = MON_Ban_the_amar
		}
}

# Soviet Union Far East Allies
country_event = {
	id = EFM_Mongolia.3
	title = EFM_Mongolia.3.t
	desc = EFM_Mongolia.3.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 1 }
		name = EFM_Mongolia.3.a
			add_opinion_modifier = {
				target = FROM
				modifier = Nations_friendly
			}
		}
}

# Ask Britain for support
country_event = {
	id = EFM_Mongolia.4
	title = EFM_Mongolia.4.t
	desc = EFM_Mongolia.4.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 40 }
		name = EFM_Mongolia.4.a
			FROM = { country_event = { id = EFM_Mongolia.5 days = 1 } }
		}
	option = {
		ai_chance = { factor = 60 }
		name = EFM_Mongolia.4.b
			FROM = {
					country_event = { id = EFM_Mongolia.6 days = 1 }
					add_ideas = MON_British_support
				}
		}
}

# Refuse
country_event = {
	id = EFM_Mongolia.5
	title = EFM_Mongolia.5.t
	desc = EFM_Mongolia.5.d
	picture = GFX_report_event_germany_politician_handshake

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.5.a
			add_opinion_modifier = {
				target = FROM
				modifier = Nations_estrangement
			}
		}
}
# Accept
country_event = {
	id = EFM_Mongolia.6
	title = EFM_Mongolia.6.t
	desc = EFM_Mongolia.6.d
	picture = GFX_report_event_molotov_ribentrop_handshake

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.6.a
			add_opinion_modifier = {
				target = FROM
				modifier = Nations_friendly
			}
		}
}

# Mongolia Democratic revolution
country_event = {
	id = EFM_Mongolia.7
	title = EFM_Mongolia.7.t
	desc = EFM_Mongolia.7.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 10 }
		name = EFM_Mongolia.7.a
			set_autonomy = { target = MON autonomy_state = autonomy_free }
			remove_from_faction = MON
			FROM = { country_event = { id = EFM_Mongolia.6 days = 1 } }
		}
	option = {
		ai_chance = { factor = 90 }
		name = EFM_Mongolia.7.b
			set_autonomy = { target = MON autonomy_state = autonomy_free }
			remove_from_faction = MON
			create_wargoal = { type = annex_everything target = FROM }
			FROM = { country_event = { id = EFM_Mongolia.5 days = 1 } }
		}
}

# Contact with Kwantung Army
country_event = {
	id = EFM_Mongolia.8
	title = EFM_Mongolia.8.t
	desc = EFM_Mongolia.8.d
	picture = GFX_report_event_chinese_japanese_handshake

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 70 }
		name = EFM_Mongolia.8.a
			FROM = {
					country_event = { id = EFM_Mongolia.6 days = 1 }
					add_ideas = MON_Kwantung_army_special_agent_mechanism
				}
		}
	option = {
		ai_chance = { factor = 30 }
		name = EFM_Mongolia.8.b
			FROM = { country_event = { id = EFM_Mongolia.5 days = 1 } }
		}
}
country_event = {
	id = EFM_Mongolia.9
	title = EFM_Mongolia.9.t
	desc = EFM_Mongolia.9.d
	picture = GFX_report_event_japanese_soldiers_03

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 100 }
		name = EFM_Mongolia.9.a
			FROM = { country_event = { id = EFM_Mongolia.6 days = 1 } }
			random_list = {
				70 = {
						country_event = { id = EFM_Mongolia.10 days = 10 }
					}
				30 = {
						country_event = { id = EFM_Mongolia.11 days = 10 }
						}
					}
		}
	option = {
		ai_chance = { factor = 0 }
		name = EFM_Mongolia.9.b
			FROM = { country_event = { id = EFM_Mongolia.5 days = 1 } }
		}
}
# Mission success
country_event = {
	id = EFM_Mongolia.10
	title = EFM_Mongolia.10.t
	desc = EFM_Mongolia.10.d
	picture = GFX_report_event_japanese_soldiers_02

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.10.a
			MON = {
					leave_faction = yes
				}
			every_other_country = {
					limit = {
							has_war_with = MON
						}
					white_peace = MON
				}
			SOV = {
					set_autonomy = { target = MON autonomy_state = autonomy_free }
					if = {
						limit = {
							SOV = { NOT = { has_war_with = JAP } }
						}
						country_event = { id = EFM_Mongolia.12 days = 1 }
					}
					if = {
						limit = {
							SOV = { has_war_with = JAP }
						}
						country_event = { id = EFM_Mongolia.13 days = 1 }
					}
				}
			set_autonomy = { target = MON autonomy_state = autonomy_integrated_puppet }
			MON = { country_event = { id = EFM_Mongolia.13 days = 1 } }
		}
}
# Mission failed
country_event = {
	id = EFM_Mongolia.11
	title = EFM_Mongolia.11.t
	desc = EFM_Mongolia.11.d
	picture = GFX_report_event_generic_battle

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.11.a
			SOV = {
					country_event = { id = EFM_Mongolia.14 days = 1 }
					hidden_effect = { set_autonomy = { target = MON autonomy_state = autonomy_integrated_puppet } }
				}
			MON = { country_event = { id = EFM_Mongolia.14 days = 1 } }
		}
}
# Soviet was defeated
country_event = {
	id = EFM_Mongolia.12
	title = EFM_Mongolia.12.t
	desc = EFM_Mongolia.12.d
	picture = GFX_report_event_japanese_soldiers_02

	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 95
			modifier = {
				factor = 5
				has_war = yes
			}
		}
		name = EFM_Mongolia.12.a
			create_wargoal = { type = puppet_wargoal_focus target = JAP }
			create_wargoal = { type = puppet_wargoal_focus target = MON }
		}
	option = {
		ai_chance = {
			factor = 5
			modifier = {
				factor = 95
				has_war = yes
			}
		}
		name = EFM_Mongolia.12.b
			
		}
}

# Mission success with MON
country_event = {
	id = EFM_Mongolia.13
	title = EFM_Mongolia.13.t
	desc = EFM_Mongolia.13.d
	picture = GFX_report_event_japanese_soldiers_02

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.13.a
		}
}
# Mission failed with MON
country_event = {
	id = EFM_Mongolia.14
	title = EFM_Mongolia.14.t
	desc = EFM_Mongolia.14.d
	picture = GFX_report_event_generic_battle

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.14.a
		}
}

# Mongol Empire
country_event = {
	id = EFM_Mongolia.15
	title = EFM_Mongolia.15.t
	desc = EFM_Mongolia.15.d
	picture = GFX_report_event_generic_battle

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 70 }
		name = EFM_Mongolia.15.a
			FROM = { country_event = { id = EFM_Mongolia.6 days = 1 } }
			MEN = { country_event = { id = EFM_Mongolia.16 days = 1 } }
		}
	option = {
		ai_chance = { factor = 30 }
		name = EFM_Mongolia.15.b
			FROM = { country_event = { id = EFM_Mongolia.5 days = 1 } }
		}
}
country_event = {
	id = EFM_Mongolia.16
	title = EFM_Mongolia.16.t
	desc = EFM_Mongolia.16.d
	picture = GFX_report_event_generic_battle

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 70 }
		name = EFM_Mongolia.16.a
			MON = { annex_country = { target = ROOT transfer_troops = yes } }
			every_state = {
					limit = {
							is_owned_by = MEN
						}
					add_core_of = MON
				}
		}
	option = {
		ai_chance = { factor = 30 }
		name = EFM_Mongolia.16.b
			MON = { set_autonomy = { target = ROOT autonomy_state = autonomy_integrated_puppet } }
		}
}

# USSR invade Mongolia (UK)
country_event = {
	id = EFM_Mongolia.17
	title = EFM_Mongolia.17.t
	desc = EFM_Mongolia.17.d
	picture = GFX_report_event_soviet_army_greeted

	fire_only_once = yes
	
	trigger = {
		tag = ENG
		MON = {
				has_idea = MON_British_support
			}
		SOV = {
				has_offensive_war_with = MON
			}
	}
	
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 30
				strength_ratio = {
					tag = SOV
					ratio > 0.5
				}
			}
		}
		name = EFM_Mongolia.17.a
			add_to_war = { targeted_alliance = MON enemy = SOV } 
			MON = { country_event = { id = EFM_Mongolia.18 days = 1 } }
			SOV = { country_event = { id = EFM_Mongolia.18 days = 1 } }
		}
	option = {
		ai_chance = {
			factor = 90
			modifier = {
				factor = 70
				strength_ratio = {
					tag = SOV
					ratio > 0.5
				}
			}
		}
		name = EFM_Mongolia.17.b
		}
}
country_event = {
	id = EFM_Mongolia.18
	title = EFM_Mongolia.18.t
	desc = EFM_Mongolia.18.d
	picture = GFX_report_event_generic_army

	is_triggered_only = yes
	
	option = {
		name = EFM_Mongolia.18.a
		}
}