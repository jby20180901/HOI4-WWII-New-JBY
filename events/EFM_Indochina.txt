add_namespace = EFM_Indochina

# The Governors-General Joseph Jules Brevie
country_event = {
	id = EFM_Indochina.1
	title = EFM_Indochina.1.t
	desc = EFM_Indochina.1.d
	
	picture = GFX_report_event_usa_election_generic
	
	fire_only_once = yes
	
	trigger = {
		tag = VIN
		has_government = democratic
		is_subject_of = FRA
		date > 1936.8.1 
	}

	option = {
			name = EFM_Indochina.1.a
			create_country_leader = {
					name = "约瑟夫·朱尔斯·布雷维"
					desc = ""
					picture = "gfx/leaders/VIN/Portrait_Indochina_Joseph_Jules_Brevie.dds"
					expire = "1965.1.1"
					ideology = socialism
					traits = {}
				}
		}
			
}
# The Governors-General Georges Catroux
country_event = {
	id = EFM_Indochina.2
	title = EFM_Indochina.2.t
	desc = EFM_Indochina.2.d
	
	picture = GFX_report_event_usa_election_generic
	
	fire_only_once = yes
	
	trigger = {
		tag = VIN
		has_government = democratic
		is_subject_of = FRA
		FRA = { NOT = { has_government = communism } }
		date > 1939.8.1 
	}

	option = {
			name = EFM_Indochina.2.a
			create_country_leader = {
					name = "乔治·卡特鲁"
					desc = ""
					picture = "gfx/leaders/VIN/Portrait_Indochina_Georges_Catroux.dds"
					expire = "1965.1.1"
					ideology = socialism
					traits = {}
				}
		}
			
}

# Agreement with Japan
country_event = {
	id = EFM_Indochina.10
	title = EFM_Indochina.10.t
	desc = EFM_Indochina.10.d
	
	picture = GFX_report_event_chinese_japanese_handshake
	
	is_triggered_only = yes

	option = {
			trigger = {
				ROOT = {
					NOT = { has_government = democratic }
				}
			}
			ai_chance = { factor = 99 }
			name = EFM_Indochina.10.a
			set_autonomy = { target = FROM autonomy_state = autonomy_wtt_imperial_protectorate }
			FROM = { country_event = { id = EFM_independent.50 days = 1 } }
		}
	option = {
			trigger = {
				ROOT = {
					has_government = democratic
				}
			}
			ai_chance = { factor = 99 }
			name = EFM_Indochina.10.b
			give_guarantee = FROM
			FROM = { country_event = { id = EFM_independent.50 days = 1 } }
		}
	option = {
			ai_chance = { factor = 1 }
			name = EFM_Indochina.10.c
			FROM = { country_event = { id = EFM_independent.51 days = 1 } }
		}
			
}

# Seek bao dai support
country_event = {
	id = EFM_Indochina.21
	title = EFM_Indochina.21.t
	desc = EFM_Indochina.21.d
	
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.21.a
			add_war_support = 0.1
			add_stability = 0.3
		}
			
}
country_event = {
	id = EFM_Indochina.22
	title = EFM_Indochina.22.t
	desc = EFM_Indochina.22.d
	
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.22.a
			add_war_support = 0.05
			add_stability = 0.1
		}
			
}
country_event = {
	id = EFM_Indochina.23
	title = EFM_Indochina.23.t
	desc = EFM_Indochina.23.d
	
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.23.a
			add_political_power = -50
			add_war_support = -0.1
		}
			
}

# Contact with Laos and Cambodia
country_event = {
	id = EFM_Indochina.24
	title = EFM_Indochina.24.t
	desc = EFM_Indochina.24.d
	
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
			ai_chance = { factor = 90 }
			name = EFM_Indochina.24.a
			add_stability = 0.1
			set_country_flag = INU_Agree_to_laos_and_cambodian_independence
		}
	option = {
			ai_chance = { factor = 10 }
			name = EFM_Indochina.24.b
			add_political_power = -50
			add_war_support = -0.1
			add_stability = -0.1
		}
			
}
# Indochina Declare independence (VIN)
country_event = {
	id = EFM_Indochina.25
	title = EFM_Indochina.25.t
	desc = EFM_Indochina.25.d
	
	picture = GFX_report_event_generic_communist_congress
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.25.a
			VIN = {
				create_field_marshal = {
						name = "胡志明" 
						portrait_path = "gfx/leaders/VIN/Portrait_Ho_Chi_Minh.dds"
						traits = {}
						skill = 4
						attack_skill = 4
						defense_skill = 4
						planning_skill = 4
						logistics_skill = 3
					}
				create_corps_commander = {
						name = "武元甲"
						portrait_path = "gfx/leaders/VIN/Portrait_Vo_Nguyen_giap.dds"
						traits = {  }
						skill = 5
						attack_skill = 4
						defense_skill = 5
						planning_skill = 5
						logistics_skill = 4
					}
				transfer_state = 671
				set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				set_political_party = {
						ideology = communism
						popularity = 0.3
					}
				hidden_effect = {
					division_template = {
						name = "起义军"
						priority = 1
						regiments = {
							infantry = { x = 0 y = 0 }
						}
					}
					random_owned_controlled_state = {
						create_unit = {
							division = "name = \"起义军第一营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第2营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第3营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第4营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第5营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第6营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第7营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第8营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
						create_unit = {
							division = "name = \"起义军第9营\" division_template = \"起义军\" start_experience_factor = 0.0" 
							owner = VIN
						}
					}
				}
			}
		}
			
}
# Indochina Declare independence (FRA)
country_event = {
	id = EFM_Indochina.26
	title = EFM_Indochina.26.t
	desc = EFM_Indochina.26.d
	
	picture = GFX_report_event_generic_riot
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.26.a
			if = {
				limit = {
					ROOT = { has_capitulated = no }
				}
				create_wargoal = { type = annex_everything target = FROM }
			}
			if = {
				limit = {
					ROOT = { has_capitulated = no }
					LAO = {
						exists = yes
						is_subject = no
					}
				}
				create_wargoal = { type = annex_everything target = LAO }
			}
			if = {
				limit = {
					ROOT = { has_capitulated = no }
					CAM = {
						exists = yes
						is_subject = no
					}
				}
				create_wargoal = { type = annex_everything target = CAM }
			}
			if = {
				limit = {
					ROOT = { has_capitulated = no }
					VIN = {
						exists = yes
						is_subject = no
					}
				}
				create_wargoal = { type = annex_everything target = VIN }
			}
		}
			
}

# Indochina revolution
country_event = {
	id = EFM_Indochina.27
	title = EFM_Indochina.27.t
	desc = EFM_Indochina.27.d
	
	picture = GFX_report_event_generic_battle
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.27.a
			if = {
				limit = {
					ROOT = { has_capitulated = no }
					NOT = {
						has_government = communism
					}
				}
				create_wargoal = { type = annex_everything target = FROM }
			}
		}
			
}

# Seek bao dai support
country_event = {
	id = EFM_Indochina.28
	title = EFM_Indochina.28.t
	desc = EFM_Indochina.28.d
	
	picture = GFX_report_event_generic_peaceful_annexation
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.28.a
			add_war_support = 0.3
			add_stability = 0.3
		}
			
}
country_event = {
	id = EFM_Indochina.29
	title = EFM_Indochina.29.t
	desc = EFM_Indochina.29.d
	
	picture = GFX_report_event_generic_riot
	
	is_triggered_only = yes

	option = {
			name = EFM_Indochina.29.a
			add_war_support = -0.1
			add_stability = -0.05
		}
			
}

# Japan wang to annex us
country_event = {
	id = EFM_Indochina.30
	title = EFM_Indochina.30.t
	desc = EFM_Indochina.30.d
	
	picture = GFX_report_event_generic_battle
	
	is_triggered_only = yes

	option = {
			ai_chance = { factor = 90 }
			name = EFM_Indochina.30.a
			FROM = {
					country_event = { id = EFM_independent.50 days = 1 }
					annex_country = { target = ROOT }
				}
			custom_effect_tooltip = GAME_OVER_TT
		}
	option = {
			ai_chance = { factor = 10 }
			name = EFM_Indochina.30.b
			FROM = { country_event = { id = EFM_independent.51 days = 1 } }
			leave_faction = yes
			create_wargoal = { type = puppet_wargoal_focus target = VIN }
		}
			
}