add_namespace = EFM_Philippine


# Refuse
country_event = {
	id = EFM_Philippine.1
	title = EFM_Philippine.1.t
	desc = EFM_Philippine.1.d
	picture = GFX_report_event_germany_politician_handshake

	is_triggered_only = yes
	
	option = {
		name = EFM_Philippine.1.a
			add_opinion_modifier = {
				target = FROM
				modifier = Nations_estrangement
			}
		}
}
# Accept
country_event = {
	id = EFM_Philippine.2
	title = EFM_Philippine.2.t
	desc = EFM_Philippine.2.d
	picture = GFX_report_event_molotov_ribentrop_handshake

	is_triggered_only = yes
	
	option = {
		name = EFM_Philippine.2.a
			add_opinion_modifier = {
				target = FROM
				modifier = Nations_friendly
			}
		}
}

# Philippines became a japanese satellite
country_event = {
	id = EFM_Philippine.3
	title = EFM_Philippine.3.t
	desc = EFM_Philippine.3.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 10 }
		name = EFM_Philippine.3.a
			FROM = {
				swap_ideas = {
						remove_idea = PHI_Philippine_autonomous_government
						add_idea = PHI_Pro_japanese_government
					}
				}
			if = {
					limit = {
							NOT = {
									is_subject_of = ROOT
								}
						}
					set_autonomy = {
							target = FROM
							autonomy_state = autonomy_satellite
						}
				}
		}
}

# Communist legalization?
country_event = {
	id = EFM_Philippine.4
	title = EFM_Philippine.4.t
	desc = EFM_Philippine.4.d
	picture = GFX_report_event_communist_leader

	fire_only_once = yes
	
	trigger = {
		original_tag = PHI
		date > 1938.1.1
		NOT = {
			has_government = communism
			has_government = fascism
		}
	}
	
	option = {
		ai_chance = { factor = 90 }
		name = EFM_Philippine.4.a
				add_popularity = {
						ideology = communism
						popularity = -0.05
					}
				add_stability = -0.05
		}
	option = {
		ai_chance = { factor = 10 }
		name = EFM_Philippine.4.b
				add_popularity = {
						ideology = communism
						popularity = 0.05
					}
				add_stability = 0.05
		}
}

# Second Philippine Republic
country_event = {
	id = EFM_Philippine.5
	title = EFM_Philippine.5.t
	desc = EFM_Philippine.5.d
	picture = GFX_report_event_japanese_transport_soldiers

	fire_only_once = yes
	
	trigger = {
		tag = JAP
		has_war_with = PHI
		JAP = { controls_state = 327 }
	}
	
	option = {
		ai_chance = { factor = 90 }
		name = EFM_Philippine.5.a
				set_autonomy = { target = PHI autonomy_state = autonomy_integrated_puppet }
				USA = { country_event = { id = EFM_Philippine.6 days = 1 } }
				PHI = { country_event = { id = EFM_Philippine.6 days = 1 } }
		}
	option = {
		ai_chance = { factor = 10 }
		name = EFM_Philippine.5.b
				add_political_power = -100
		}
}
country_event = {
	id = EFM_Philippine.6
	title = EFM_Philippine.6.t
	desc = EFM_Philippine.6.d
	picture = GFX_report_event_chinese_japanese_handshake

	is_triggered_only = yes
	
	option = {
		name = EFM_Philippine.6.a
		}
}

# Seek Australian/Japanese assistance
country_event = {
	id = EFM_Philippine.7
	title = EFM_Philippine.7.t
	desc = EFM_Philippine.7.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	option = {
		ai_chance = { factor = 90 }
		name = EFM_Philippine.7.a
				FROM = {
					country_event = { id = EFM_Philippine.8 hours = 12 }
				}
				give_guarantee = FROM
		}
	option = {
		ai_chance = { factor = 10 }
		name = EFM_Philippine.7.b
				FROM = {
					country_event = { id = EFM_independent.51 hours = 12 }
				}
		}
}
country_event = {
	id = EFM_Philippine.8
	title = EFM_Philippine.8.t
	desc = EFM_Philippine.8.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	
	option = {
		name = EFM_Philippine.8.a
				effect_tooltip = {
					FROM = {
						give_guarantee = ROOT
					}
				}
		}
}

# Support the Philippines civil war? (US)
country_event = {
	id = EFM_Philippine.9
	title = EFM_Philippine.9.t
	desc = EFM_Philippine.9.d
	picture = GFX_report_event_generic_battle

	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 90
			modifier = {
				factor = 10
				has_idea = great_depression
			}
			modifier = {
				factor = 30
				has_idea = great_depression_2
			}
			modifier = {
				factor = 70
				has_idea = great_depression_3
			}
		}
		name = EFM_Philippine.9.a
				FROM = {
					country_event = { id = EFM_Philippine.10 days = 10 }
				}
				add_manpower = -30000
		}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 90
				has_idea = great_depression
			}
			modifier = {
				factor = 70
				has_idea = great_depression_2
			}
			modifier = {
				factor = 30
				has_idea = great_depression_3
			}
		}
		name = EFM_Philippine.9.b
		}
}
country_event = {
	id = EFM_Philippine.10
	title = EFM_Philippine.10.t
	desc = EFM_Philippine.10.d
	picture = GFX_report_event_generic_battle

	is_triggered_only = yes
	
	immediate = {
			hidden_effect = {
						random_other_country = {
								limit = {
										original_tag = PHI
										has_government = democratic
									}
								division_template = {
										name = "US Peacekeeping Force"
										is_locked = yes
										regiments = {
												infantry = {
														x = 0
														y = 0
													}
												infantry = {
														x = 0
														y = 1
													}
												infantry = {
														x = 0
														y = 2
													}
												infantry = {
														x = 0
														y = 3
													}
											}
									}
								327 = {
										create_unit = {
												division = "name = \"1. US Peacekeeping Force\" division_template = \"US Peacekeeping Force\" start_experience_factor = 0.3"
												owner = PREV
											}
										create_unit = {
												division = "name = \"2. US Peacekeeping Force\" division_template = \"US Peacekeeping Force\" start_experience_factor = 0.3"
												owner = PREV
											}
										create_unit = {
												division = "name = \"3. US Peacekeeping Force\" division_template = \"US Peacekeeping Force\" start_experience_factor = 0.3"
												owner = PREV
											}
									}
								set_country_flag = PHI_US_support_the_government
							}
					}
	}
	
	option = {
		name = EFM_Philippine.10.a
		}
}
country_event = {
	id = EFM_Philippine.11
	title = EFM_Philippine.11.t
	desc = EFM_Philippine.11.d
	picture = GFX_report_event_generic_strike
	
	fire_only_once = yes
	
	trigger = {
		original_tag = USA
		any_other_country = {
			original_tag = PHI
			has_government = democratic
			has_civil_war = no
			is_subject_of = ROOT
			has_country_flag = PHI_US_support_the_government
		}
	}

	option = {
		name = EFM_Philippine.11.a
		add_manpower = 214256
		hidden_effect = {
			random_other_country = {
				limit = {
						original_tag = PHI
						has_government = democratic
					}
				delete_unit_template_and_units = {
					division_template = "US Peacekeeping Force"
				}
				clr_country_flag = PHI_US_support_the_government
			}
		}
	}
}